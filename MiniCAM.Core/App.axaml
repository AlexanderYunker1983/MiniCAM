<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="using:MiniCAM.Core"
             x:Class="MiniCAM.Core.App"
             RequestedThemeVariant="Default">
             <!-- "Default" ThemeVariant follows system theme variant. "Dark" or "Light" are other available options. -->

    <Application.DataTemplates>
        <local:ViewLocator/>
    </Application.DataTemplates>

    <Application.Resources>
      <ResourceDictionary>
        <ResourceDictionary.ThemeDictionaries>
          <!-- Light theme colors -->
          <ResourceDictionary x:Key="Light">
            <Color x:Key="RibbonBackgroundColor">#f2f4f7</Color>
            <Color x:Key="RibbonBorderColor">#d0d6dd</Color>
            <Color x:Key="RibbonTabHoverColor">#f1f2f4</Color>
            <Color x:Key="RibbonTabSelectedColor">#b7bcc7</Color>
            <Color x:Key="RibbonButtonBackgroundColor">#ffffffff</Color>
            <Color x:Key="RibbonButtonPointerOverBackgroundColor">#fff0f0f0</Color>
            <Color x:Key="RibbonButtonPressedBackgroundColor">#ffe0e0e0</Color>
            <Color x:Key="GridSplitterColor">#666666</Color>
            <Color x:Key="TabContentBorderColor">#d0d6dd</Color>
            <Color x:Key="CircularOverlayButtonBorderColor">#a0a0a0</Color>
            <SolidColorBrush x:Key="RibbonBackgroundBrush"
                             Color="{StaticResource RibbonBackgroundColor}" />
            <SolidColorBrush x:Key="RibbonBorderBrush"
                             Color="{StaticResource RibbonBorderColor}" />
            <SolidColorBrush x:Key="RibbonTabHoverBrush"
                             Color="{StaticResource RibbonTabHoverColor}" />
            <SolidColorBrush x:Key="RibbonTabSelectedBrush"
                             Color="{StaticResource RibbonTabSelectedColor}" />
            <SolidColorBrush x:Key="RibbonButtonBackgroundBrush"
                             Color="{StaticResource RibbonButtonBackgroundColor}" />
            <SolidColorBrush x:Key="RibbonButtonPointerOverBackgroundBrush"
                             Color="{StaticResource RibbonButtonPointerOverBackgroundColor}" />
            <SolidColorBrush x:Key="RibbonButtonPressedBackgroundBrush"
                             Color="{StaticResource RibbonButtonPressedBackgroundColor}" />
            <SolidColorBrush x:Key="GridSplitterBrush"
                             Color="{StaticResource GridSplitterColor}" />
            <SolidColorBrush x:Key="TabContentBorderBrush"
                             Color="{StaticResource TabContentBorderColor}" />
            <SolidColorBrush x:Key="CircularOverlayButtonBorderBrush"
                             Color="{StaticResource CircularOverlayButtonBorderColor}" />
          </ResourceDictionary>

          <!-- Dark theme colors -->
          <ResourceDictionary x:Key="Dark">
            <Color x:Key="RibbonBackgroundColor">#2b2f36</Color>
            <Color x:Key="RibbonBorderColor">#3a4049</Color>
            <Color x:Key="RibbonTabHoverColor">#333842</Color>
            <Color x:Key="RibbonTabSelectedColor">#586378</Color>
            <Color x:Key="RibbonButtonBackgroundColor">#3a4049</Color>
            <Color x:Key="RibbonButtonPointerOverBackgroundColor">#444b57</Color>
            <Color x:Key="RibbonButtonPressedBackgroundColor">#565e6c</Color>
            <Color x:Key="GridSplitterColor">#888888</Color>
            <Color x:Key="TabContentBorderColor">#3a4049</Color>
            <Color x:Key="CircularOverlayButtonBorderColor">#c0c0c0</Color>
            <Color x:Key="Preview2DBackgroundColor">#1e1e1e</Color>
            <Color x:Key="Preview2DMinorGridColor">#3a3a3a</Color>
            <Color x:Key="Preview2DMajorGridColor">#4a4a4a</Color>
            <Color x:Key="Preview2DAxisColor">#ffffff</Color>
            <SolidColorBrush x:Key="RibbonBackgroundBrush"
                             Color="{StaticResource RibbonBackgroundColor}" />
            <SolidColorBrush x:Key="RibbonBorderBrush"
                             Color="{StaticResource RibbonBorderColor}" />
            <SolidColorBrush x:Key="RibbonTabHoverBrush"
                             Color="{StaticResource RibbonTabHoverColor}" />
            <SolidColorBrush x:Key="RibbonTabSelectedBrush"
                             Color="{StaticResource RibbonTabSelectedColor}" />
            <SolidColorBrush x:Key="RibbonButtonBackgroundBrush"
                             Color="{StaticResource RibbonButtonBackgroundColor}" />
            <SolidColorBrush x:Key="RibbonButtonPointerOverBackgroundBrush"
                             Color="{StaticResource RibbonButtonPointerOverBackgroundColor}" />
            <SolidColorBrush x:Key="RibbonButtonPressedBackgroundBrush"
                             Color="{StaticResource RibbonButtonPressedBackgroundColor}" />
            <SolidColorBrush x:Key="GridSplitterBrush"
                             Color="{StaticResource GridSplitterColor}" />
            <SolidColorBrush x:Key="TabContentBorderBrush"
                             Color="{StaticResource TabContentBorderColor}" />
            <SolidColorBrush x:Key="CircularOverlayButtonBorderBrush"
                             Color="{StaticResource CircularOverlayButtonBorderColor}" />
            <SolidColorBrush x:Key="Preview2DBackgroundBrush"
                             Color="{StaticResource Preview2DBackgroundColor}" />
            <SolidColorBrush x:Key="Preview2DMinorGridBrush"
                             Color="{StaticResource Preview2DMinorGridColor}" />
            <SolidColorBrush x:Key="Preview2DMajorGridBrush"
                             Color="{StaticResource Preview2DMajorGridColor}" />
            <SolidColorBrush x:Key="Preview2DAxisBrush"
                             Color="{StaticResource Preview2DAxisColor}" />
          </ResourceDictionary>

          <!-- Fallback (used when ThemeVariant is Default) -->
          <ResourceDictionary x:Key="Default">
            <Color x:Key="RibbonBackgroundColor">#f2f4f7</Color>
            <Color x:Key="RibbonBorderColor">#d0d6dd</Color>
            <Color x:Key="RibbonTabHoverColor">#f1f2f4</Color>
            <Color x:Key="RibbonTabSelectedColor">#b7bcc7</Color>
            <Color x:Key="RibbonButtonBackgroundColor">#ffffffff</Color>
            <Color x:Key="RibbonButtonPointerOverBackgroundColor">#fff0f0f0</Color>
            <Color x:Key="RibbonButtonPressedBackgroundColor">#ffe0e0e0</Color>
            <Color x:Key="GridSplitterColor">#666666</Color>
            <Color x:Key="TabContentBorderColor">#d0d6dd</Color>
            <Color x:Key="CircularOverlayButtonBorderColor">#a0a0a0</Color>
            <Color x:Key="Preview2DBackgroundColor">#ffffff</Color>
            <Color x:Key="Preview2DMinorGridColor">#dcdcdc</Color>
            <Color x:Key="Preview2DMajorGridColor">#c8c8c8</Color>
            <Color x:Key="Preview2DAxisColor">#000000</Color>
            <SolidColorBrush x:Key="RibbonBackgroundBrush"
                             Color="{StaticResource RibbonBackgroundColor}" />
            <SolidColorBrush x:Key="RibbonBorderBrush"
                             Color="{StaticResource RibbonBorderColor}" />
            <SolidColorBrush x:Key="RibbonTabHoverBrush"
                             Color="{StaticResource RibbonTabHoverColor}" />
            <SolidColorBrush x:Key="RibbonTabSelectedBrush"
                             Color="{StaticResource RibbonTabSelectedColor}" />
            <SolidColorBrush x:Key="RibbonButtonBackgroundBrush"
                             Color="{StaticResource RibbonButtonBackgroundColor}" />
            <SolidColorBrush x:Key="RibbonButtonPointerOverBackgroundBrush"
                             Color="{StaticResource RibbonButtonPointerOverBackgroundColor}" />
            <SolidColorBrush x:Key="RibbonButtonPressedBackgroundBrush"
                             Color="{StaticResource RibbonButtonPressedBackgroundColor}" />
            <SolidColorBrush x:Key="GridSplitterBrush"
                             Color="{StaticResource GridSplitterColor}" />
            <SolidColorBrush x:Key="TabContentBorderBrush"
                             Color="{StaticResource TabContentBorderColor}" />
            <SolidColorBrush x:Key="CircularOverlayButtonBorderBrush"
                             Color="{StaticResource CircularOverlayButtonBorderColor}" />
            <SolidColorBrush x:Key="Preview2DBackgroundBrush"
                             Color="{StaticResource Preview2DBackgroundColor}" />
            <SolidColorBrush x:Key="Preview2DMinorGridBrush"
                             Color="{StaticResource Preview2DMinorGridColor}" />
            <SolidColorBrush x:Key="Preview2DMajorGridBrush"
                             Color="{StaticResource Preview2DMajorGridColor}" />
            <SolidColorBrush x:Key="Preview2DAxisBrush"
                             Color="{StaticResource Preview2DAxisColor}" />
          </ResourceDictionary>
        </ResourceDictionary.ThemeDictionaries>
      </ResourceDictionary>
    </Application.Resources>

    <Application.Styles>
        <FluentTheme />
        
        <!-- Default styles for all TabControl (same as RibbonTabs) -->
        <Style Selector="TabControl > TabItem">
          <Setter Property="Padding" Value="8 4" />
          <Setter Property="MinHeight" Value="28" />
          <Setter Property="CornerRadius" Value="8,8,0,0" />
          <Setter Property="FontSize" Value="14" />
          <Setter Property="HorizontalContentAlignment" Value="Center" />
          <Setter Property="VerticalContentAlignment" Value="Center" />
        </Style>

        <!-- Base state: gray border around the tab header (applies to all tabs including unselected) -->
        <Style Selector="TabControl > TabItem /template/ Border#PART_LayoutRoot">
          <Setter Property="BorderBrush" Value="{DynamicResource RibbonBorderBrush}" />
          <Setter Property="BorderThickness" Value="1" />
        </Style>

        <!-- Unselected tab state (explicit) -->
        <Style Selector="TabControl > TabItem:not(:selected) /template/ Border#PART_LayoutRoot">
          <Setter Property="BorderBrush" Value="{DynamicResource RibbonBorderBrush}" />
          <Setter Property="BorderThickness" Value="1" />
        </Style>

        <Style Selector="TabControl > TabItem:pointerover /template/ Border#PART_LayoutRoot">
          <Setter Property="Background" Value="{DynamicResource RibbonTabHoverBrush}" />
          <Setter Property="BorderBrush" Value="{DynamicResource RibbonBorderBrush}" />
          <Setter Property="BorderThickness" Value="1" />
        </Style>

        <Style Selector="TabControl > TabItem:selected /template/ Border#PART_LayoutRoot">
          <Setter Property="Background" Value="{DynamicResource RibbonTabSelectedBrush}" />
          <Setter Property="BorderBrush" Value="{DynamicResource RibbonBorderBrush}" />
          <Setter Property="BorderThickness" Value="1" />
        </Style>

        <Style Selector="TabItem:selected /template/ Border#PART_SelectedPipe">
          <Setter Property="IsVisible" Value="False" />
        </Style>
    </Application.Styles>
</Application>